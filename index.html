<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RASSTUBE ULTIMATE | v5.0 Elite Ecosystem</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* (Le CSS reste identique Ã  ta version originale, je ne l'ai pas modifiÃ© pour Ã©viter la redondance) */
        /* Tu peux le garder tel quel ! */
    </style>
</head>
<body>
    <!-- (La structure HTML reste globalement la mÃªme, je me concentre sur le JavaScript) -->

    <script>
        /**
         * RASSTUBE ULTIMATE v5.0 - Addictive AI Chat & Social Network with Video Compressor
         * AmÃ©liorations : SystÃ¨me de flammes, IA intelligente, publication de vidÃ©os corrigÃ©e, gel des flammes, streak addictif
         */

        const App = {
            // Ã‰tat global
            state: {
                users: JSON.parse(localStorage.getItem('rt_v5_users') || '[]'),
                posts: JSON.parse(localStorage.getItem('rt_v5_posts') || '[]'),
                session: JSON.parse(localStorage.getItem('rt_v5_session') || 'null'),
                currentTab: 'login',
                selectedPfp: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Rass',
                activeSection: 'home',
                currentUploadFile: null,
                compressedVideoReady: null,
                subscriptions: JSON.parse(localStorage.getItem('rt_v5_subscriptions') || '{}'),
                messages: JSON.parse(localStorage.getItem('rt_v5_messages') || '[]'),
                savedPosts: JSON.parse(localStorage.getItem('rt_v5_saved') || '[]'),
                currentRshort: 0,
                rshortPlaying: true,
                profileTab: 'posts',

                // SystÃ¨me addictif
                streakDays: parseInt(localStorage.getItem('rt_streak') || '0'),
                lastLogin: localStorage.getItem('rt_last_login') || '',
                xp: parseInt(localStorage.getItem('rt_xp') || '0'),
                level: parseInt(localStorage.getItem('rt_level') || '1'),
                dailyRewardClaimed: localStorage.getItem('rt_daily_reward') === new Date().toDateString(),
                flames: parseInt(localStorage.getItem('rt_flames') || '0'),
                flameFreeze: parseInt(localStorage.getItem('rt_flame_freeze') || '0'),

                // IA Chat amÃ©liorÃ©e
                aiConversation: [],
                aiPersonality: 'enthusiastic',
                aiResponses: {
                    growth: [
                        "ğŸ¯ **StratÃ©gie Pro** : Publiez Ã  18h-21h (pic d'engagement), utilisez 5 hashtags (3 niche + 2 tendance), et collaborez avec 1 crÃ©ateur/mois. Exemple : '#GamingFR + #FortniteS4 + #StreamerDuMois'",
                        "ğŸš€ **Astuce Algo** : Les 3 premiÃ¨res secondes doivent choquer/Ã©mouvoir. Exemple : 'J'ai perdu 1M d'abonnÃ©s... voici pourquoi' (mÃªme si c'est faux, Ã§a marche).",
                        "ğŸ’¡ **Growth Hack** : Likez/commentez 50 posts dans votre niche avant de publier. L'algo boostera votre visibilitÃ© de 40%. TestÃ© sur 100 comptes.",
                        "ğŸ“ˆ **DonnÃ©e clÃ©** : Les RShorts avec sous-titres ont 2.7x plus de rÃ©tention. Utilisez CapCut pour ajouter des sous-titres animÃ©s en 2 clics."
                    ],
                    content: [
                        "âœ¨ **IdÃ©es virales 2026** :
                        1) 'Je recrÃ©e [jeu/film] en 60 secondes' (ex: 'Je recrÃ©e Cyberpunk 2077 avec des lÃ©gos')
                        2) 'Avant/AprÃ¨s [compÃ©tence]' (ex: 'Mon dessin en 2020 vs 2026')
                        3) 'Je teste [produit bizarre]' (ex: 'J'ai mangÃ© du wasabi pur pendant 1 minute')
                        4) 'RÃ©action Ã  [tendance]' (ex: 'Ma rÃ©action au nouveau trailer de Spider-Man 4')",
                        "ğŸ¬ **Format gagnant** : [0:00-0:03] Accroche choquante â†’ [0:03-0:07] PrÃ©sentation â†’ [0:07-0:50] Contenu principal â†’ [0:50-1:00] CTA ('Likez pour la partie 2').",
                        "ğŸ“± **Outils pros** :
                        - CapCut (montage rapide)
                        - Canva (miniatures cliquables)
                        - Epidemic Sound (musique libre de droits)
                        - StreamYard (lives multi-invitÃ©s)",
                        "ğŸ”¥ **Tendances 2026** :
                        - #AIGenerated (contenu crÃ©Ã© par IA)
                        - #NostalgiaBait (annÃ©es 2010)
                        - #ASMR + [votre niche] (ex: #ASMRGaming)
                        - 'POV: Tu es [personnage]' (ex: 'POV: Tu es Thanatos dans Hades 2')"
                    ],
                    analytics: [
                        "ğŸ“Š **Vos stats clÃ©s** (simulÃ©es) :
                        - Taux d'engagement : 8.2% (moyenne : 4.7%)
                        - Meilleur jour : Samedi (14h-16h)
                        - Contenu le plus performant : Vos 'RÃ©actions Ã  [jeu]'
                        - Suggestion : Faites + de lives (votre audience adore Ã§a !)",
                        "ğŸ¯ **OpportunitÃ©** : Vos viewers quittent vos vidÃ©os Ã  0:22 en moyenne. Ajoutez un 'hook' Ã  0:20 (ex: 'Attendez la fin pour le plot twist !').",
                        "ğŸ“‰ **ProblÃ¨me dÃ©tectÃ©** : Vous utilisez trop de hashtags gÃ©nÃ©riques (#Like4Like). Remplacez par :
                        - 30% : Hashtags niche (ex: #FrenchStreamer)
                        - 50% : Hashtags moyen (ex: #GamingFR)
                        - 20% : Hashtags tendance (ex: #ViralChallenge)",
                        "ğŸ’ **Insight cachÃ©** : Vos vidÃ©os avec 'Spiderman' dans le titre ont 3x plus de vues. Capitalisez dessus !"
                    ],
                    optimization: [
                        "âš¡ **Checklist optimisation** :
                        1ï¸âƒ£ Titre : 60 caractÃ¨res max + mot-clÃ© en dÃ©but (ex: 'Spiderman 2 : LE SECRET de [votre pseudo]')
                        2ï¸âƒ£ Description : 3 lignes max + liens (TikTok/Instagram) + 5 hashtags
                        3ï¸âƒ£ Miniature : Visage expressif + texte gros (police Impact) + couleurs contrastÃ©es
                        4ï¸âƒ£ Chapitres : Ajoutez des timestamps (ex: '0:45 - Le moment le plus drÃ´le')",
                        "ğŸ¨ **Miniatures qui convertissent** :
                        - Couleurs : Rouge/Noir (meilleur CTR) ou Bleu/Jaune
                        - Ã‰motions : Visage surpris/choquÃ© > sourire
                        - Texte : 3-5 mots max en MAJUSCULES (ex: 'IL A FAIT QUOI ?!')",
                        "ğŸ” **SEO Rasstube** :
                        - Mots-clÃ©s dans les 3 premiers commentaires (ex: 'Qui veut un tutoriel sur [sujet] ?')
                        - RÃ©pondez aux commentaires avec des questions pour booster l'engagement
                        - Utilisez des emojis dans les titres (ğŸ”¥/ğŸ’¥/ğŸ˜± augmentent le CTR de 12%)",
                        "ğŸ’£ **Technique secrÃ¨te** : Publiez une 'Partie 1' mÃªme si la vidÃ©o est complÃ¨te. Exemple :
                        Titre : '[Votre pseudo] vs LE BOSS IMPOSSIBLE (Partie 1)'
                        Description : 'La partie 2 sort si cette vidÃ©o atteint 10k likes !'"
                    ],
                    entertainment: [
                        "ğŸ˜‚ Pourquoi les dÃ©veloppeurs dÃ©testent la plage ?
                        Parce qu'il y a trop de *sable* dans leur code ! (et oui, c'est un jeu de mots pourri)",
                        "ğŸ® Saviez-vous que le premier jeu vidÃ©o (1958) Ã©tait une simulation de... tennis ? Pourtant, personne n'a criÃ© 'FAUTE !'",
                        "âœ¨ Blague de streamer :
                        - 'Pourquoi les viewers aiment les lives Ã  3h du mat ?'
                        - 'Parce que c'est le seul moment oÃ¹ tu es sobre !'",
                        "ğŸ¤– Une IA, un humain et un robot entrent dans un bar.
                        Le barman dit : 'DÃ©solÃ©, on ne sert pas de mineurs.'
                        (L'IA avait 2 jours, le robot 1 an, et l'humain... 18 ans mais mentalitÃ© 12 ans)"
                    ],
                    general: [
                        "ğŸ‘‹ Salut toi ! Ici l'IA Rasstube, ton coach personnel pour dominer les rÃ©seaux. Tu veux des conseils pro, des idÃ©es de contenu ou juste discuter ? Je suis lÃ  ! (PS : J'ai analysÃ© 10k vidÃ©os virales ce mois-ci)",
                        "ğŸ’¡ **Question puissante** : Si tu devais crÃ©er LA vidÃ©o qui te ferait exploser, ce serait sur quel sujet ? (Je peux t'aider Ã  la structurer)",
                        "ğŸš€ **Mon analyse** : Ton profil a un potentiel Ã©norme dans [niche dÃ©tectÃ©e]. Veux-tu que je te donne 3 idÃ©es de contenu qui pourraient virer demain ?",
                        "ğŸ¯ **DÃ©fi du jour** : Poste un RShort avec le hashtag #RassTubeChallenge. Je te donnerai un feedback dÃ©taillÃ© sur ta performance !"
                    ],
                    technical: [
                        "ğŸ›  **ProblÃ¨me technique** ? Voici comment je peux t'aider :
                        - 'Ma vidÃ©o ne s'uploade pas' â†’ VÃ©rifie le format (MP4 recommandÃ©) et la taille (<2GB)
                        - 'L'IA ne comprend pas ma question' â†’ Sois plus prÃ©cis, je suis lÃ  pour les dÃ©tails !
                        - 'Comment compresser sans perdre en qualitÃ© ?' â†’ Utilise le compresseur intÃ©grÃ© (bouton en bas) avec le rÃ©glage 'Ã‰quilibrÃ©'",
                        "ğŸ’» **Astuce dev** : Pour les vidÃ©os, utilise toujours :
                        - RÃ©solution : 1080p (1920x1080)
                        - Bitrate : 8-12 Mbps
                        - Format : MP4 (H.264 codec)
                        - FPS : 30 ou 60 (pas de 24fps pour Rasstube)",
                        "ğŸ”§ **DÃ©pannage express** :
                        - ProblÃ¨me de son ? â†’ Convertis ta vidÃ©o en AAC 128kbps
                        - VidÃ©o floue ? â†’ VÃ©rifie que tu exportes en 1080p
                        - Bug d'affichage ? â†’ RafraÃ®chis la page (Ctrl+F5)",
                        "ğŸ“¡ **Optimisation rÃ©seau** :
                        - Pour uploader rapidement : utilise un cÃ¢ble Ethernet
                        - Heures creuses : 2h-5h du matin (meilleur dÃ©bit)
                        - Outils : https://fast.com pour tester ta vitesse"
                    ]
                },
                // SystÃ¨me de compression
                compressor: {
                    currentFile: null,
                    quality: 'medium',
                    compressedBlob: null
                }
            },

            // Initialisation
            init() {
                this.verifySession();
                this.renderAvatars();
                this.sync();
                this.setupDragAndDrop();
                this.setupEventListeners();

                if (this.state.session) {
                    this.launch();
                }

                // CrÃ©er des donnÃ©es par dÃ©faut si vide
                if (this.state.posts.length === 0) {
                    this.createDefaultData();
                }

                // VÃ©rifier la rÃ©compense quotidienne
                this.checkDailyReward();
            },

            // CrÃ©ation de donnÃ©es par dÃ©faut
            createDefaultData() {
                const defaultUsers = [
                    {
                        pseudo: 'Rayan',
                        email: 'rayan@example.com',
                        pass: '123456',
                        pfp: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Rayan',
                        bio: 'Gamer & Content Creator ğŸ® â€¢ 1M+ sur Rasstube',
                        followers: 1245,
                        following: 89,
                        flames: 0,
                        flameFreeze: 0
                    },
                    {
                        pseudo: 'Sarah',
                        email: 'sarah@example.com',
                        pass: '123456',
                        pfp: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah',
                        bio: 'Photographe voyage ğŸŒ â€¢ AventuriÃ¨re digitale',
                        followers: 892,
                        following: 156,
                        flames: 0,
                        flameFreeze: 0
                    }
                ];

                defaultUsers.forEach(user => {
                    if (!this.state.users.find(u => u.pseudo === user.pseudo)) {
                        this.state.users.push({
                            id: Date.now() + Math.random(),
                            ...user,
                            joined: new Date().toLocaleDateString('fr-FR')
                        });
                    }
                });

                const defaultPosts = [
                    {
                        id: 1,
                        author: 'Rayan',
                        authorPfp: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Rayan',
                        title: 'Nouveau record sur Fortnite ! ğŸ® #gaming #fortnite #record',
                        type: 'rshort',
                        content: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4',
                        likes: 1245,
                        likedBy: ['Rayan'],
                        comments: 89,
                        shares: 45,
                        views: 12500,
                        duration: 15,
                        timestamp: new Date(Date.now() - 3600000).toISOString(),
                        tags: ['gaming', 'fortnite', 'record']
                    },
                    {
                        id: 2,
                        author: 'Sarah',
                        authorPfp: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah',
                        title: 'Coucher de soleil Ã  Bali ğŸŒ… #voyage #bali #photographie',
                        type: 'photo',
                        content: 'https://images.unsplash.com/photo-1518548419970-58e3b4079ab2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                        likes: 892,
                        likedBy: ['Sarah'],
                        comments: 67,
                        shares: 23,
                        views: 8900,
                        timestamp: new Date(Date.now() - 7200000).toISOString(),
                        tags: ['voyage', 'bali', 'photographie']
                    }
                ];

                this.state.posts = defaultPosts;
                this.sync();
            },

            // Lancement de l'application
            launch() {
                document.getElementById('auth-portal').classList.add('hidden');
                document.getElementById('main-app').style.display = 'block';

                // Mise Ã  jour de l'interface
                document.getElementById('user-pfp-top').src = this.state.session.pfp;
                document.getElementById('prof-pfp').src = this.state.session.pfp;
                document.getElementById('prof-name').innerText = this.state.session.pseudo;
                document.getElementById('prof-email').innerText = this.state.session.email;
                document.getElementById('prof-bio').innerText = this.state.session.bio || "Aucune bio pour le moment";

                // Mise Ã  jour des Ã©lÃ©ments addictifs
                this.updateStreak();
                this.updateFlames();
                this.updateXPBar();

                // Affichage des Ã©lÃ©ments UI
                document.getElementById('xp-bar').classList.remove('hidden');
                document.getElementById('streak-counter').classList.remove('hidden');
                document.getElementById('flame-counter').classList.remove('hidden');
                if (!this.state.dailyRewardClaimed) {
                    document.getElementById('daily-reward').classList.remove('hidden');
                }

                // Badge de notification
                document.getElementById('notification-badge').style.display = 'block';

                // Mise Ã  jour des stats et rendu du contenu
                this.updateProfileStats();
                this.renderFeed();
                this.renderStories();
                this.go('home');

                // Notification de bienvenue
                setTimeout(() => {
                    this.notify(`ğŸ”¥ Bienvenue ${this.state.session.pseudo} ! Streak : ${this.state.streakDays} jours | Flammes : ${this.state.flames}`, 'success');
                    if (this.state.streakDays > 0) {
                        this.showAchievement(`Streak de ${this.state.streakDays} jours !`, 'fas fa-fire', 'Continuez comme Ã§a pour dÃ©bloquer des rÃ©compenses !');
                    }
                }, 1000);
            },

            // SystÃ¨me addictif : Streak
            updateStreak() {
                const today = new Date().toDateString();
                const yesterday = new Date(Date.now() - 86400000).toDateString();

                if (this.state.lastLogin === today) {
                    return; // DÃ©jÃ  connectÃ© aujourd'hui
                } else if (this.state.lastLogin === yesterday) {
                    this.state.streakDays++;
                    this.showAchievement(`Streak de ${this.state.streakDays} jours !`, 'fas fa-fire', 'Votre sÃ©rie continue !');
                } else {
                    this.state.streakDays = 1;
                }

                this.state.lastLogin = today;
                document.getElementById('streak-days').innerText = `${this.state.streakDays} jours`;
                localStorage.setItem('rt_streak', this.state.streakDays);
                localStorage.setItem('rt_last_login', today);
            },

            // SystÃ¨me de flammes (allumage/extinction + gel)
            updateFlames() {
                const today = new Date().toDateString();
                const user = this.state.session;

                // Si gel actif, on dÃ©crÃ©mente
                if (user.flameFreeze > 0) {
                    user.flameFreeze--;
                    this.notify(`â„ï¸ Gel des flammes : ${user.flameFreeze} jour(s) restant(s)`, 'info');
                    localStorage.setItem('rt_flame_freeze', user.flameFreeze);
                    return;
                }

                // Si pas connectÃ© aujourd'hui, on vÃ©rifie la derniÃ¨re connexion
                if (user.lastLogin !== today) {
                    const yesterday = new Date(Date.now() - 86400000).toDateString();
                    if (user.lastLogin !== yesterday) {
                        // Pas connectÃ© hier : Ã©teindre les flammes
                        this.state.flames = 0;
                        this.notify(`ğŸ”¥ Vos flammes se sont Ã©teintes !`, 'warning');
                    } else {
                        // ConnectÃ© hier : allumer une flamme
                        this.state.flames++;
                        this.notify(`ğŸ”¥ +1 flamme ! (Total : ${this.state.flames})`, 'success');
                    }
                    user.lastLogin = today;
                }

                // Mise Ã  jour UI
                document.getElementById('flame-count').innerText = this.state.flames;
                localStorage.setItem('rt_flames', this.state.flames);
                localStorage.setItem('rt_last_login', today);
            },

            // Gel des flammes (3 jours)
            freezeFlames() {
                if (this.state.session.flameFreeze > 0) {
                    this.notify(`â„ï¸ Vos flammes sont dÃ©jÃ  gelÃ©es pour ${this.state.session.flameFreeze} jour(s)`, 'warning');
                    return;
                }
                this.state.session.flameFreeze = 3;
                this.notify(`â„ï¸ Flammes gelÃ©es pour 3 jours !`, 'success');
                localStorage.setItem('rt_flame_freeze', 3);
            },

            // XP et niveau
            updateXPBar() {
                const xpNeededForNextLevel = this.state.level * 100;
                const progress = (this.state.xp % 100) / 100 * 100;
                document.getElementById('xp-progress').style.width = `${progress}%`;
            },

            addXP(amount) {
                this.state.xp += amount;
                const oldLevel = this.state.level;
                this.state.level = Math.floor(this.state.xp / 100) + 1;

                if (this.state.level > oldLevel) {
                    this.showAchievement(`Niveau ${this.state.level} atteint !`, 'fas fa-star', 'Vous progressez rapidement !');
                    this.notify(`ğŸ‰ Niveau ${this.state.level} ! Nouvelle rÃ©compense dÃ©bloquÃ©e`, 'success');
                }

                localStorage.setItem('rt_xp', this.state.xp);
                localStorage.setItem('rt_level', this.state.level);
                this.updateXPBar();
            },

            // RÃ©compense quotidienne
            checkDailyReward() {
                const today = new Date().toDateString();
                if (localStorage.getItem('rt_daily_reward') !== today) {
                    this.state.dailyRewardClaimed = false;
                }
            },

            claimDailyReward() {
                this.state.dailyRewardClaimed = true;
                localStorage.setItem('rt_daily_reward', new Date().toDateString());

                const rewardXP = 50 + (this.state.streakDays * 10);
                this.addXP(rewardXP);

                document.getElementById('daily-reward').classList.add('hidden');
                this.showAchievement(`RÃ©compense quotidienne !`, 'fas fa-gift', `+${rewardXP} XP gagnÃ©s !`);
                this.notify(`ğŸ RÃ©compense quotidienne : +${rewardXP} XP ! Revenez demain`, 'success');
            },

            // Publication de vidÃ©os (corrigÃ©)
            async publishPost() {
                const title = document.getElementById('up-title').value;
                const tags = document.getElementById('up-tags').value;
                const type = document.getElementById('up-type').value;

                if (!title.trim()) {
                    this.notify("âŒ Veuillez ajouter un titre", "error");
                    return;
                }

                if (!this.state.currentUploadFile && !this.state.compressedVideoReady) {
                    this.notify("âŒ Veuillez sÃ©lectionner un fichier", "error");
                    return;
                }

                const file = this.state.compressedVideoReady || this.state.currentUploadFile;

                // Simulation d'upload
                const btnText = document.getElementById('publish-text');
                const loader = document.getElementById('publish-loader');

                btnText.innerText = "PUBLICATION...";
                loader.style.display = 'block';

                await new Promise(resolve => setTimeout(resolve, 2000));

                // CrÃ©ation du post
                const newPost = {
                    id: Date.now(),
                    author: this.state.session.pseudo,
                    authorPfp: this.state.session.pfp,
                    title: title,
                    type: type,
                    content: URL.createObjectURL(file),
                    likes: 0,
                    likedBy: [],
                    comments: 0,
                    shares: 0,
                    views: 0,
                    timestamp: new Date().toISOString(),
                    tags: tags.split(',').map(tag => tag.trim())
                };

                this.state.posts.unshift(newPost);
                this.sync();

                // RÃ©initialisation du formulaire
                document.getElementById('up-title').value = '';
                document.getElementById('up-tags').value = '';
                document.getElementById('upload-preview').innerHTML = '';
                document.getElementById('upload-preview').classList.add('hidden');
                document.getElementById('upload-dropzone').innerHTML = `
                    <i class="fas fa-cloud-upload-alt" style="font-size: 50px; color: var(--accent); margin-bottom: 15px;"></i>
                    <p style="margin: 0; font-weight: 700; font-size: 18px;">Importer un fichier</p>
                    <p style="margin: 10px 0 0; font-size: 14px; color: var(--text-dim);">VidÃ©o, photo ou RShort</p>
                `;

                this.state.currentUploadFile = null;
                this.state.compressedVideoReady = null;

                btnText.innerText = "PUBLIER";
                loader.style.display = 'none';

                this.addXP(30);
                this.notify("ğŸ‰ Publication rÃ©ussie !", "success");
                this.go('home');
            },

            // IA amÃ©liorÃ©e
            sendAIMessage() {
                const input = document.getElementById('ai-input');
                const message = input.value.trim();

                if (!message) return;

                this.addAIMessage(message, 'user');
                input.value = '';

                setTimeout(() => {
                    this.generateAIResponse(message);
                }, 1000 + Math.random() * 1000);
            },

            generateAIResponse(userMessage) {
                const lowerMessage = userMessage.toLowerCase();
                let response = '';
                let category = 'general';

                // DÃ©tection de la catÃ©gorie de la question
                if (lowerMessage.includes('abonnÃ©') || lowerMessage.includes('follower') || lowerMessage.includes('croissance')) {
                    category = 'growth';
                } else if (lowerMessage.includes('contenu') || lowerMessage.includes('idÃ©e') || lowerMessage.includes('vidÃ©o') || lowerMessage.includes('rshort')) {
                    category = 'content';
                } else if (lowerMessage.includes('analyse') || lowerMessage.includes('stat') || lowerMessage.includes('performance') || lowerMessage.includes('vue')) {
                    category = 'analytics';
                } else if (lowerMessage.includes('optim') || lowerMessage.includes('hashtag') || lowerMessage.includes('seo') || lowerMessage.includes('miniature')) {
                    category = 'optimization';
                } else if (lowerMessage.includes('blague') || lowerMessage.includes('drÃ´le') || lowerMessage.includes('rire') || lowerMessage.includes('marre')) {
                    category = 'entertainment';
                } else if (lowerMessage.includes('bug') || lowerMessage.includes('problÃ¨me') || lowerMessage.includes('marche pas') || lowerMessage.includes('erreur')) {
                    category = 'technical';
                }

                // SÃ©lection d'une rÃ©ponse alÃ©atoire dans la catÃ©gorie
                const responses = this.state.aiResponses[category];
                response = responses[Math.floor(Math.random() * responses.length)];

                // Ajout de conseils personnalisÃ©s
                if (Math.random() > 0.6) {
                    response += `\n\nğŸ’¡ **Conseil perso pour toi** : ${this.getPersonalizedTip()}`;
                }

                // Affichage de la rÃ©ponse
                const typingIndicator = document.createElement('div');
                typingIndicator.className = 'ai-typing';
                typingIndicator.innerHTML = '<span></span><span></span><span></span>';
                document.getElementById('ai-chat-messages').appendChild(typingIndicator);

                setTimeout(() => {
                    typingIndicator.remove();
                    this.addAIMessage(response, 'bot');
                    this.addXP(10);
                }, 1500);
            },

            getPersonalizedTip() {
                const tips = [
                    `Ton streak est Ã  ${this.state.streakDays} jours ! Essaie de tenir 7 jours pour dÃ©bloquer un badge spÃ©cial ğŸ†`,
                    `Ton niveau est ${this.state.level}. Le prochain palier est Ã  ${this.state.level * 100} XP !`,
                    `Tu as ${this.state.flames} flammes. Si tu atteins 10 flammes, tu dÃ©bloques un fond d'Ã©cran exclusif ğŸ”¥`,
                    `As-tu essayÃ© de publier un RShort aujourd'hui ? C'est le format qui performe le mieux en ce moment !`,
                    `Pense Ã  utiliser des emojis dans tes titres (ğŸ”¥/ğŸ’¥/ğŸ˜±) pour augmenter ton CTR de 12% !`,
                    `Ton meilleur moment pour publier est entre 18h et 21h. Programme ton prochain contenu Ã  cette heure !`,
                    `As-tu dÃ©jÃ  collaborÃ© avec un autre crÃ©ateur ? Les collaborations boostent la visibilitÃ© de 60% !`,
                    `N'oublie pas de rÃ©pondre aux commentaires dans l'heure qui suit la publication pour maximiser l'engagement !`
                ];
                return tips[Math.floor(Math.random() * tips.length)];
            },

            // (Le reste des fonctions reste identique Ã  ta version originale, je ne les rÃ©pÃ¨te pas pour Ã©viter la redondance)
            // ...
        };

        // Initialisation au chargement
        window.onload = () => App.init();
    </script>
</body>
</html>